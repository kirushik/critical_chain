<% page_title! @estimation.title %>

<div id="estimation_title">
  <h1><%= @estimation.editable :title %></h1>
</div>

<div class="columns">
  <div class="column is-7">
    <div class="table-container">
      <table id="<%= dom_id @estimation %>"
             class="table is-hoverable is-fullwidth estimation-items-index"
             data-controller="sortable"
             data-sortable-update-url="<%= estimation_estimation_items_path(@estimation) %>">
        <tbody>
          <%= render partial: @estimation.items_partial_name, collection: @estimation.estimation_items, as: :estimation_item %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="column is-5">
    <div id="mode_toggle">
      <%= render 'mode_toggle' %>
    </div>
    <%= render 'estimation_items/form_for_new' unless @estimation.tracking_mode? %>
    <%= render 'results' %>
    <%= render 'buffer_consumption' if @estimation.tracking_mode? %>
    <%= render 'graph' if @estimation.tracking_mode? %>
  </div>
</div>
